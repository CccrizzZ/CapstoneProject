(this["webpackJsonpreact-client-app"]=this["webpackJsonpreact-client-app"]||[]).push([[0],{147:function(e,t,n){},357:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"dev","type":"address"},{"internalType":"uint256","name":"gid","type":"uint256"}],"name":"ApproveGameByDevID","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"GID","type":"uint256"}],"name":"BuyGame","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"GID","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"},{"internalType":"address","name":"publisher","type":"address"},{"internalType":"bool","name":"live","type":"bool"}],"name":"ListNewGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenID","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"PostP2PListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenID","type":"uint256"}],"name":"PurchaseP2PListing","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"dev","type":"address"},{"internalType":"uint256","name":"gid","type":"uint256"}],"name":"RejectGameByDevID","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"SetMeToDeveloper","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"SetMeToPlayer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"SetMyDisplayName","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"enum GGTimeEx.Roles","name":"role","type":"uint8"}],"name":"SetRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"}],"name":"SubmitPitch","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"TouchTipJar","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"WithdrawRevenue","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"AllP2PListing","outputs":[{"internalType":"uint256","name":"tokenID","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bool","name":"sold","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CheckTipJar","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CheckUnclaimedRevenue","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetAllDevelopers","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetAllGamePitch","outputs":[{"components":[{"internalType":"uint256","name":"GID","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"},{"internalType":"address","name":"publisher","type":"address"},{"internalType":"bool","name":"approved","type":"bool"},{"internalType":"bool","name":"rejected","type":"bool"}],"internalType":"struct GGTimeEx.GamePitch[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetAllP2PListing","outputs":[{"components":[{"internalType":"uint256","name":"tokenID","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bool","name":"sold","type":"bool"}],"internalType":"struct GGTimeEx.P2PListing[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetAllStoreListing","outputs":[{"components":[{"internalType":"uint256","name":"GID","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"},{"internalType":"address","name":"publisher","type":"address"},{"internalType":"bool","name":"live","type":"bool"}],"internalType":"struct GGTimeEx.Listing[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetMyDisplayName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetMyGamePitch","outputs":[{"components":[{"internalType":"uint256","name":"GID","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"},{"internalType":"address","name":"publisher","type":"address"},{"internalType":"bool","name":"approved","type":"bool"},{"internalType":"bool","name":"rejected","type":"bool"}],"internalType":"struct GGTimeEx.GamePitch[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetMyLibrary","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"GetMyRole","outputs":[{"internalType":"enum GGTimeEx.Roles","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"GetPlayerLibrary","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"GetRole","outputs":[{"internalType":"enum GGTimeEx.Roles","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"GIDListing","outputs":[{"internalType":"uint256","name":"GID","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"},{"internalType":"address","name":"publisher","type":"address"},{"internalType":"bool","name":"live","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"GID","type":"uint256"}],"name":"IsLive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenID","type":"uint256"}],"name":"IsSold","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"P2PStoreListing","outputs":[{"internalType":"uint256","name":"tokenID","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bool","name":"sold","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PlatformPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"RoyaltiesPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"StoreListing","outputs":[{"internalType":"uint256","name":"GID","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"string","name":"URI","type":"string"},{"internalType":"address","name":"publisher","type":"address"},{"internalType":"bool","name":"live","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TokenIDs","outputs":[{"internalType":"uint256","name":"_value","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},366:function(e,t,n){},367:function(e,t,n){},383:function(e,t){},385:function(e,t){},390:function(e,t){},391:function(e,t){},417:function(e,t){},419:function(e,t){},430:function(e,t){},432:function(e,t){},442:function(e,t){},444:function(e,t){},458:function(e,t){},492:function(e,t){},493:function(e,t){},561:function(e,t){},563:function(e,t){},568:function(e,t){},570:function(e,t){},577:function(e,t){},589:function(e,t){},592:function(e,t){},597:function(e,t){},797:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(53),s=n.n(i),o=(n(366),n(367),n(368),n(8)),c=n(10),l=n(11),p=n(15),u=n(16),d=n(2),m=n.n(d),b=n(809),y=n(812),h=n(810),j=n(805),x=n(818),f=n(356),g=n(813),O=n(806),v=n(811),T=n(816),w=n(341),C=n.n(w),P=n(344),k=n.n(P),A=n(214),S=n.n(A),R=n(815),G=n(817),I=(n(147),n(128)),M=n.n(I),L=n(0),D=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).BuyGame=function(){var e=Object(o.a)(m.a.mark((function e(t,n,a){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),r.props.ShowPopup(),e.next=4,r.props.ConnectedContract.methods.BuyGame(t).send({from:r.props.WalletAddr,value:n}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:i=e.sent,console.log(i),alert("Transaction Success!"),r.props.HidePopup();case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.GetAllListing=Object(o.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.ShowPopup(),e.next=3,r.props.ConnectedContract.methods.GetAllStoreListing().call({from:r.props.WalletAddr});case 3:t=e.sent,console.log("All listing from blockchain: \n"+t),r.props.HidePopup(),r.setState({AllListings:t}),n=[],a=0;case 9:if(!(a<r.state.AllListings.length)){e.next=15;break}return e.next=12,M.a.get(r.state.AllListings[a].URI).then((function(e){var t={image:e.data.image,desc:e.data.description};n.push(t)})).catch((function(e){console.log(e)}));case 12:a++,e.next=9;break;case 15:r.setState({ImageArr:n});case 16:case"end":return e.stop()}}),e)}))),r.RenderListingImage=function(e){return Object(L.jsx)("img",{alt:"s",src:r.state.ImageArr[e].image})},r.GetDescription=function(e){return Object(L.jsxs)(R.a.Item,{id:"darklistgroup",children:["Description: ",r.state.ImageArr[e].desc]})},r.RenderStore=function(){return r.state.AllListings.map((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(L.jsxs)(G.a,{style:{width:"100%",height:"fit-content"},children:[null===r.state.ImageArr?null:r.RenderListingImage(t),Object(L.jsxs)(G.a.Body,{style:{backgroundColor:"#343a40"},children:[Object(L.jsx)(G.a.Title,{children:e.name}),Object(L.jsx)(G.a.Text,{children:Object(L.jsxs)(R.a,{style:{marginTop:"20px"},variant:"flush",children:[Object(L.jsxs)(R.a.Item,{id:"darklistgroup",children:["GID: ",e.GID]}),null===r.state.ImageArr?null:r.GetDescription(t),Object(L.jsxs)(R.a.Item,{id:"darklistgroup",children:["Publisher: ",e.publisher]}),Object(L.jsxs)(R.a.Item,{id:"darklistgroup",children:["Price: ",window.web3.utils.fromWei(e.price)," Dev"]})]})}),Object(L.jsx)(j.a,{variant:"success",onClick:function(t){return r.BuyGame(e.GID,e.price,t)},children:"Purchase"})]})]},t)}))},r.state={AllListings:null,ImageArr:null},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GetAllListing();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(L.jsxs)("div",{id:"modulebox",style:{minHeight:"80vh"},children:[Object(L.jsx)("h2",{children:"Store Page"}),Object(L.jsx)("hr",{}),Object(L.jsx)("div",{id:"griddisplay",children:null===this.state.AllListings?null:this.RenderStore()})]})}}]),n}(r.Component),U=n(807),W=n(353),N=n(808),B=n(814),F=n(354),H=new(n(358).a)({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweEUzNzczNjBEYTFBRDlmZkU3ZDg1QjcyQTZBMjk1NEUyN0UzZTI3MDgiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTY1MDgzMjE2MDIwOSwibmFtZSI6IkRldmVsb3BtZW50LWtleSJ9.fBVoPVoh1z3j6OnPmpzTcjFp-o6QibxhCM_-En31IvI"}),E=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).VerifyGameOwnerShip=function(){var e=Object(o.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.ConnectedContract.methods.ownerOf(t).call({from:r.props.WalletAddr});case 2:return n=e.sent,e.abrupt("return",n===r.props.WalletAddr);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.RenderGuestPage=function(){return Object(L.jsxs)("div",{id:"modulebox",style:{height:"80vh"},children:[Object(L.jsx)("hr",{}),Object(L.jsx)("h2",{children:"please register as player first"}),Object(L.jsx)("hr",{})]})},r.GetPlayerLibrary=Object(o.a)(m.a.mark((function e(){var t,n,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.props.IsConnected()){e.next=2;break}return e.abrupt("return");case 2:return r.props.ShowPopup(),e.next=5,r.props.ConnectedContract.methods.GetMyLibrary().call({from:r.props.WalletAddr});case 5:t=e.sent,console.log(t),n=[],a=0;case 9:if(!(a<t.length)){e.next=19;break}return e.next=12,r.props.ConnectedContract.methods.tokenURI(t[a]).call({from:r.props.WalletAddr});case 12:return i=e.sent,console.log(i),e.next=16,M.a.get(i).then((function(e){var t={name:e.data.name,image:e.data.image,desc:e.data.description};n.push(t)})).catch((function(e){console.log(e)}));case 16:a++,e.next=9;break;case 19:console.log(n),r.setState({PlayerLibrary:n}),r.props.HidePopup();case 22:case"end":return e.stop()}}),e)}))),r.RenderPlayerLibraryCard=function(){return r.state.PlayerLibrary.map((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(L.jsxs)(G.a,{style:{width:"100%",height:"fit-content"},children:[Object(L.jsx)(G.a.Img,{variant:"top",src:e.image}),Object(L.jsxs)(G.a.Body,{style:{backgroundColor:"#343a40"},children:[Object(L.jsx)(G.a.Title,{children:e.name}),Object(L.jsxs)(G.a.Text,{children:[Object(L.jsx)("hr",{}),"Description: ",e.desc,Object(L.jsx)("hr",{})]}),Object(L.jsx)(j.a,{variant:"primary",onClick:r.VerifyGameOwnerShip,children:"Play"})]})]},t)}))},r.RenderPlayerLibrary=function(){return Object(L.jsxs)("div",{id:"modulebox",children:[Object(L.jsx)("h2",{children:"My Library"}),Object(L.jsx)("hr",{}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:r.GetPlayerLibrary,children:"Refresh"}),Object(L.jsx)("div",{id:"griddisplay",style:{minHeight:"80vh",height:"100%",marginTop:"20px"},children:r.state.PlayerLibrary?r.RenderPlayerLibraryCard():null})]})},r.ShowGameSubmitModal=function(){r.setState({ShowGameSubmitPanel:!0})},r.CloseGameSubmitModal=function(){r.setState({ShowGameSubmitPanel:!1})},r.SubmitPitch=Object(o.a)(m.a.mark((function e(){var t,n,a,i,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.GameTitleInput.current.value,n=r.GameDescInput.current.value,a=r.GamePicsInput.current.files[0],i=window.web3.utils.toWei(r.GamePriceInput.current.value.toString(),"ether"),console.log(t),console.log(n),console.log(a),console.log(i),""!==t&&""!==n&&""!==i){e.next=11;break}return alert("Please complete the form"),e.abrupt("return");case 11:return r.props.ShowPopup(),e.next=14,H.store({name:t,description:n,image:a});case 14:return s=e.sent,console.log(s),e.next=18,r.props.ConnectedContract.methods.SubmitPitch(t,i,s.url).send({from:r.props.WalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:c=e.sent,console.log(c),alert("Submission success!"),r.props.HidePopup(),r.CloseGameSubmitModal();case 23:case"end":return e.stop()}}),e)}))),r.GetMySubmission=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.props.IsConnected()){e.next=2;break}return e.abrupt("return");case 2:return r.props.ShowPopup(),e.next=5,r.props.ConnectedContract.methods.GetMyGamePitch().call({from:r.props.WalletAddr});case 5:t=e.sent,console.log(t),r.setState({DevSubmissionListing:t}),r.props.HidePopup();case 9:case"end":return e.stop()}}),e)}))),r.RenderMySubmission=function(){if("Developer"===r.props.UserRole)return r.state.DevSubmissionListing.map((function(e,t){return Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:e.name}),Object(L.jsx)("td",{children:Object(L.jsx)("a",{id:"wrapAnchor",href:e.URI,target:"_blank",rel:"noreferrer",children:e.URI})}),Object(L.jsx)("td",{children:window.web3.utils.fromWei(e.price)}),Object(L.jsx)("td",{children:e.approved.toString()}),Object(L.jsx)("td",{children:e.rejected.toString()})]},t)}))},r.GetUnclaimedIncomeAmount=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.ShowPopup(),e.next=3,r.props.ConnectedContract.methods.CheckUnclaimedRevenue().call({from:r.props.WalletAddr});case 3:t=e.sent,r.props.HidePopup(),r.setState({UnclaimedRevenue:t});case 6:case"end":return e.stop()}}),e)}))),r.ClaimIncome=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.ShowPopup(),e.next=3,r.props.ConnectedContract.methods.WithdrawRevenue().send({from:r.props.WalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:t=e.sent,console.log(t),r.GetUnclaimedIncomeAmount(),r.props.HidePopup();case 7:case"end":return e.stop()}}),e)}))),r.RenderDeveloperMintShop=function(){return Object(L.jsxs)("div",{id:"modulebox",style:{minHeight:"80vh"},children:[Object(L.jsx)("h2",{children:"Developer Hub"}),Object(L.jsx)("hr",{}),Object(L.jsx)(O.a,{children:Object(L.jsxs)(U.a,{children:[Object(L.jsxs)(W.a,{id:"col2",children:[Object(L.jsx)("h4",{children:"Functions"}),Object(L.jsx)("hr",{}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:r.ShowGameSubmitModal,children:"Submit New Game"}),Object(L.jsx)("br",{}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:r.ClaimIncome,children:"Claim Sales Revenue"})]}),Object(L.jsxs)(W.a,{id:"col2",children:[Object(L.jsx)("h4",{children:"Unclaimed Sales Revenue"}),Object(L.jsx)("hr",{}),Object(L.jsx)(F.a,{hits:null==r.state.UnclaimedRevenue?0:r.state.UnclaimedRevenue,withBorder:!0,withGlow:!0,minLength:19,size:25,padding:4,digitSpacing:3,segmentThickness:4,segmentSpacing:.5,segmentActiveColor:"#76FF03",segmentInactiveColor:"#315324",backgroundColor:"#222222",borderThickness:7,glowStrength:.5,glowSize:4}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{children:"Revenue calculated in wei"}),Object(L.jsxs)("p",{children:["1 Wei = 1 GLMR(10)",Object(L.jsx)("sup",{children:"-18"})]})]})]})}),Object(L.jsx)("hr",{}),Object(L.jsx)("h4",{children:"My Game Pitch"}),Object(L.jsx)("br",{}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:r.GetMySubmission,children:"Refresh"}),Object(L.jsx)("hr",{}),Object(L.jsxs)(N.a,{style:{border:"2px solid black",marginLeft:"auto",marginRight:"auto"},variant:"warning",bordered:!0,size:"sm",striped:!0,hover:!0,children:[Object(L.jsx)("thead",{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"Game Name"}),Object(L.jsx)("th",{children:"IPFS URL"}),Object(L.jsx)("th",{children:"Price (GLMR)"}),Object(L.jsx)("th",{children:"Approved"}),Object(L.jsx)("th",{children:"Rejected"})]})}),Object(L.jsx)("tbody",{children:null==r.state.DevSubmissionListing?null:r.RenderMySubmission()})]}),Object(L.jsxs)(T.a,{show:r.state.ShowGameSubmitPanel,backdrop:"static",keyboard:!1,children:[Object(L.jsx)(T.a.Header,{children:Object(L.jsx)(T.a.Title,{children:"\ud83d\udcbe Submit Pitch"})}),Object(L.jsx)(T.a.Body,{children:Object(L.jsxs)(B.a,{children:[Object(L.jsxs)(B.a.Group,{className:"mb-3",children:[Object(L.jsx)(B.a.Label,{children:"\ud83c\udfae Game title:"}),Object(L.jsx)(B.a.Control,{ref:r.GameTitleInput,type:"text",placeholder:"Enter your game title"})]}),Object(L.jsxs)(B.a.Group,{className:"mb-3",children:[Object(L.jsx)(B.a.Label,{children:"\ud83e\uddfe Game Description:"}),Object(L.jsx)(B.a.Control,{ref:r.GameDescInput,placeholder:"Enter your game description",as:"textarea",rows:3})]}),Object(L.jsxs)(B.a.Group,{className:"mb-3",children:[Object(L.jsx)("img",{style:{maxWidth:"80px"},src:"https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/ipfs/ipfs.png",alt:"ipfs"}),Object(L.jsx)("br",{}),Object(L.jsx)(B.a.Label,{children:" Demo Pictures (one single picture)"}),Object(L.jsx)(B.a.Control,{ref:r.GamePicsInput,type:"file",size:"sm"})]}),Object(L.jsxs)(B.a.Group,{className:"mb-3",children:[Object(L.jsx)(B.a.Label,{children:"\ud83d\udcb0 Your Price (in DEV):"}),Object(L.jsx)(B.a.Control,{ref:r.GamePriceInput,type:"number",placeholder:"Enter 0 if you want it to be free"})]})]})}),Object(L.jsxs)(T.a.Footer,{children:[Object(L.jsx)(j.a,{variant:"secondary",onClick:r.CloseGameSubmitModal,children:"Cancel"}),Object(L.jsx)(j.a,{variant:"primary",onClick:r.SubmitPitch,children:"Submit"})]})]})]})},r.GetAllPitch=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.ShowPopup(),e.next=3,r.props.ConnectedContract.methods.GetAllGamePitch().call({from:r.props.WalletAddr});case 3:t=e.sent,console.log(t),r.setState({AdminAllGamePitch:t}),r.props.HidePopup();case 7:case"end":return e.stop()}}),e)}))),r.RenderAllPitch=function(){if("Admin"===r.props.UserRole)return r.state.AdminAllGamePitch.map((function(e,t){return Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:Object(L.jsx)("p",{style:{wordBreak:"break-all"},children:e.name})}),Object(L.jsx)("td",{children:e.publisher}),Object(L.jsx)("td",{children:Object(L.jsx)("a",{id:"wrapAnchor",href:e.URI,target:"_blank",rel:"noreferrer",children:e.URI})}),Object(L.jsx)("td",{children:window.web3.utils.fromWei(e.price)}),Object(L.jsx)("td",{children:Object(L.jsx)(j.a,{variant:"success",onClick:function(t){return r.ApprovePitch(e.publisher,e.GID,t)},children:"Go"})}),Object(L.jsx)("td",{children:Object(L.jsx)(j.a,{variant:"danger",onClick:function(t){return r.RejectPitch(e.publisher,e.GID,t)},children:"Go"})})]},t)}))},r.ApprovePitch=function(){var e=Object(o.a)(m.a.mark((function e(t,n,a){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,a),r.props.ShowPopup(),e.next=4,r.props.ConnectedContract.methods.ApproveGameByDevID(t,n-1).send({from:r.props.WalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:i=e.sent,console.log(i),alert("Pitch Approved!"),r.props.HidePopup(),r.GetAllPitch();case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.RejectPitch=function(){var e=Object(o.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.ShowPopup(),e.next=3,r.props.ConnectedContract.methods.RejectGameByDevID(t,n).send({from:r.props.WalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:a=e.sent,console.log(a),alert("Pitch Rejected!"),r.props.HidePopup(),r.GetAllPitch();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.CheckTipJar=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.ShowPopup(),e.next=3,r.props.ConnectedContract.methods.CheckTipJar().call({from:r.props.WalletAddr});case 3:t=e.sent,r.setState({AdminTipjar:t}),r.props.HidePopup();case 6:case"end":return e.stop()}}),e)}))),r.TouchTipJar=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.state.AdminTipjar&&0!==r.state.AdminTipjar&&"0"!==r.state.AdminTipjar){e.next=3;break}return alert("Tipjar is empty!"),e.abrupt("return");case 3:return r.props.ShowPopup(),e.next=6,r.props.ConnectedContract.methods.TouchTipJar().send({from:r.props.WalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:t=e.sent,console.log(t),alert("Income Collected!"),r.props.HidePopup();case 10:case"end":return e.stop()}}),e)}))),r.SetUserRole=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r.AdminSetRoleAddr.current.value),console.log(r.AdminSetRoleNumber.current.value),r.props.ShowPopup(),e.next=5,r.props.ConnectedContract.methods.SetRole(r.AdminSetRoleAddr.current.value,r.AdminSetRoleNumber.current.value).send({from:r.props.WalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.props.HidePopup();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:t=e.sent,console.log(t),alert("Role set success!"),r.props.HidePopup();case 9:case"end":return e.stop()}}),e)}))),r.GetTargetPlayerLibrary=Object(o.a)(m.a.mark((function e(){var t,n,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.AdminGetUserLibAddr.current.value.length<1)){e.next=3;break}return alert("Please enter the user address"),e.abrupt("return");case 3:return r.props.ShowPopup(),console.log(r.AdminGetUserLibAddr.current.value),e.next=7,r.props.ConnectedContract.methods.GetPlayerLibrary(r.AdminGetUserLibAddr.current.value).call({from:r.props.WalletAddr});case 7:t=e.sent,console.log(t),r.setState({TargetPlayerLibrary:t}),n=[],a=0;case 12:if(!(a<r.state.TargetPlayerLibrary.length)){e.next=20;break}return e.next=15,r.props.ConnectedContract.methods.tokenURI(window.web3.utils.toBN(r.state.TargetPlayerLibrary[a])).call({from:r.props.WalletAddr});case 15:i=e.sent,M.a.get(i).then((function(e){var t={name:e.data.name,image:e.data.image,desc:e.data.description};n.push(t)})).catch((function(e){console.log(e)}));case 17:a++,e.next=12;break;case 20:console.log(n),r.setState({TargetPlayerLibraryArray:n}),r.props.HidePopup();case 23:case"end":return e.stop()}}),e)}))),r.RenderTargetUserLib=function(){if("Admin"===r.props.UserRole)return r.state.TargetPlayerLibraryArray.map((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:Object(L.jsx)("p",{style:{wordBreak:"break-all"},children:e.name})}),Object(L.jsx)("td",{children:e.desc}),Object(L.jsx)("td",{children:Object(L.jsx)("a",{id:"wrapAnchor",href:e.image,target:"_blank",rel:"noreferrer",children:"IPFS URL"})})]},t)}))},r.RenderAdminHub=function(){return Object(L.jsxs)("div",{id:"modulebox",children:[Object(L.jsx)("h2",{children:"Admin Hub"}),Object(L.jsx)("hr",{}),Object(L.jsx)(O.a,{children:Object(L.jsxs)(U.a,{children:[Object(L.jsxs)(W.a,{id:"col2",children:[Object(L.jsxs)(x.a,{className:"mb-3",children:[Object(L.jsx)(j.a,{onClick:r.CheckTipJar,children:"CheckTipJar"}),Object(L.jsx)(f.a,{disabled:!0,placeholder:null===r.state.AdminTipjar?null:r.state.AdminTipjar})]}),Object(L.jsx)(j.a,{variant:"danger",onClick:r.TouchTipJar,children:"TouchTipJar"}),Object(L.jsx)("hr",{}),Object(L.jsxs)(x.a,{className:"mb-3",children:[Object(L.jsx)(j.a,{onClick:r.GetTargetPlayerLibrary,children:"GetUserLibrary"}),Object(L.jsx)(f.a,{ref:r.AdminGetUserLibAddr,placeholder:"TargetUserWalletAddress"})]}),Object(L.jsxs)(N.a,{style:{border:"2px solid black",marginLeft:"auto",marginRight:"auto"},variant:"success",bordered:!0,size:"sm",striped:!0,hover:!0,children:[Object(L.jsx)("thead",{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"Game Name"}),Object(L.jsx)("th",{children:"Developer"}),Object(L.jsx)("th",{children:"IPFS URL"})]})}),Object(L.jsxs)("tbody",{children:[Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:Object(L.jsx)("p",{style:{wordBreak:"break-all"},children:"Example Game"})}),Object(L.jsx)("td",{children:"example description"}),Object(L.jsx)("td",{children:Object(L.jsx)("a",{id:"wrapAnchor",href:"example",target:"_blank",rel:"noreferrer",children:"ExampleImage"})})]}),null===r.state.TargetPlayerLibraryArray?null:r.RenderTargetUserLib()]})]})]}),Object(L.jsxs)(W.a,{id:"col2",children:[Object(L.jsxs)(R.a,{style:{margin:"auto",marginBottom:"20px",width:"40%"},variant:"flush",children:[Object(L.jsx)(R.a.Item,{variant:"dark",children:"0 = Guest"}),Object(L.jsx)(R.a.Item,{variant:"primary",children:"1 = Player"}),Object(L.jsx)(R.a.Item,{variant:"warning",children:"2 = Developer"}),Object(L.jsx)(R.a.Item,{variant:"danger",children:"3 = Admin"})]}),Object(L.jsxs)(x.a,{className:"mb-3",children:[Object(L.jsx)(j.a,{onClick:r.SetUserRole,children:"SetRole"}),Object(L.jsx)(f.a,{ref:r.AdminSetRoleAddr,placeholder:"Address","aria-describedby":"basic-addon1"}),Object(L.jsx)(f.a,{ref:r.AdminSetRoleNumber,placeholder:"Role","aria-describedby":"basic-addon1"})]})]})]})}),Object(L.jsx)("hr",{}),Object(L.jsx)("h4",{children:"All Game Pitch"}),Object(L.jsx)("br",{}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:r.GetAllPitch,children:"Refresh"}),Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsxs)(N.a,{style:{border:"2px solid black",marginLeft:"auto",marginRight:"auto"},variant:"danger",bordered:!0,size:"sm",striped:!0,hover:!0,children:[Object(L.jsx)("thead",{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"Game Name"}),Object(L.jsx)("th",{children:"Developer"}),Object(L.jsx)("th",{children:"IPFS URL"}),Object(L.jsx)("th",{children:"Price (GLMR)"}),Object(L.jsx)("th",{children:"Approve"}),Object(L.jsx)("th",{children:"Reject"})]})}),Object(L.jsx)("tbody",{children:null===r.state.AdminAllGamePitch?null:r.RenderAllPitch()})]})]})},r.RenderUserLibrary=function(){switch(r.props.UserRole){case"Guest":return r.RenderGuestPage();case"Player":return r.RenderPlayerLibrary();case"Developer":return r.RenderDeveloperMintShop();case"Admin":return r.RenderAdminHub()}},r.state={ShowGameSubmitPanel:!1,UnclaimedRevenue:null,StoreListing:null,DevSubmissionListing:null,MyIncome:null,AdminAllSubmissionListing:null,AdminTipjar:null,AdminAllGamePitch:null,PlayerLibrary:null,TargetPlayerLibrary:null,TargetPlayerLibraryArray:null},r.GameTitleInput=a.a.createRef(),r.GameDescInput=a.a.createRef(),r.GamePicsInput=a.a.createRef(),r.GamePriceInput=a.a.createRef(),r.AdminSetRoleAddr=a.a.createRef(),r.AdminSetRoleNumber=a.a.createRef(),r.AdminGetUserLibAddr=a.a.createRef(),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.props.UserRole,e.next="Developer"===e.t0?3:"Guest"===e.t0?9:"Player"===e.t0?11:"Admin"===e.t0?15:19;break;case 3:return console.log("Developer init"),e.next=6,this.GetUnclaimedIncomeAmount();case 6:return e.next=8,this.GetMySubmission();case 8:case 18:case 19:return e.abrupt("break",20);case 9:return console.log("Guest init"),e.abrupt("break",20);case 11:return e.next=13,this.GetPlayerLibrary();case 13:return console.log("Player init"),e.abrupt("break",20);case 15:return console.log("Admin init"),e.next=18,this.GetAllPitch();case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(L.jsx)(L.Fragment,{children:this.RenderUserLibrary()})}}]),n}(r.Component),z=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).PostListing=function(e,t){},r.Purchase=function(e){},r.TogglePurchaseModel=function(){var e=!r.state.show;r.setState({show:e})},r.RenderP2PCard=function(e){return Object(L.jsxs)(G.a,{style:{width:"100%"},children:[Object(L.jsx)(G.a.Img,{variant:"top",src:e}),Object(L.jsxs)(G.a.Body,{style:{backgroundColor:"#343a40"},children:[Object(L.jsx)(G.a.Title,{children:"Example Game"}),Object(L.jsxs)(G.a.Text,{children:[Object(L.jsx)("hr",{}),"Description: A game about snake eating each other",Object(L.jsx)("hr",{}),"Publisher: ",r.state.ConnectedWalletAddr,Object(L.jsx)("hr",{}),"Price: 5 Dev"]}),Object(L.jsx)(j.a,{variant:"primary",children:"Purchase"})]})]})},r.state={show:!1},r}return Object(l.a)(n,[{key:"render",value:function(){return Object(L.jsxs)("div",{id:"modulebox",children:[Object(L.jsx)("h2",{children:"P2P Market place"}),Object(L.jsx)("hr",{}),Object(L.jsxs)("div",{id:"griddisplay",children:[this.RenderP2PCard("http://media.steampowered.com/apps/csgo/blog/images/fb_image.png?v=6"),this.RenderP2PCard("http://media.steampowered.com/apps/csgo/blog/images/fb_image.png?v=6"),this.RenderP2PCard("http://media.steampowered.com/apps/csgo/blog/images/fb_image.png?v=6"),this.RenderP2PCard("https://cdn.akamai.steamstatic.com/steam/apps/1046930/capsule_616x353.jpg?t=1621357797"),this.RenderP2PCard("https://cdn.akamai.steamstatic.com/steam/apps/1046930/capsule_616x353.jpg?t=1621357797")]}),Object(L.jsxs)(T.a,{show:this.state.show,onHide:this.TogglePurchaseModel,backdrop:"static",keyboard:!1,children:[Object(L.jsx)(T.a.Header,{closeButton:!0,children:Object(L.jsx)(T.a.Title,{children:"Modal title"})}),Object(L.jsx)(T.a.Body,{children:Object(L.jsxs)(R.a,{children:[Object(L.jsx)(R.a.Item,{children:"Price: "}),Object(L.jsx)(R.a.Item,{children:"Fees: is price x 0.02"}),Object(L.jsxs)(R.a.Item,{children:["Total: ",1e3]})]})}),Object(L.jsxs)(T.a.Footer,{children:[Object(L.jsx)(j.a,{variant:"secondary",onClick:this.TogglePurchaseModel,children:"Close"}),Object(L.jsx)(j.a,{variant:"primary",children:"Understood"})]})]})]})}}]),n}(r.Component),J=n.p+"static/media/ggicon1.73d9ed06.png",_=n.p+"static/media/bg.c7a91897.jpg",Z=n(357),V=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).Init=Object(o.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Connecting to metamask"),e.next=3,k()();case 3:if(!(t=e.sent)){e.next=15;break}if(window.web3=new C.a(t),n=new window.web3.eth.Contract(Z,r.state.TargetContractAddr)){e.next=10;break}return alert("Contract Not Found"),e.abrupt("return");case 10:console.log(t.selectedAddress),r.setState({ConnectedWalletAddr:t.selectedAddress}),r.setState({ConnectedContract:n}),e.next=17;break;case 15:return alert("MetaMask must be installed to run this DApp."),e.abrupt("return",!1);case 17:r.UpdateRole(),r.UpdateName();case 19:case"end":return e.stop()}}),e)}))),r.UpdateRole=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.state.ConnectedContract.methods.GetMyRole().call({from:r.state.ConnectedWalletAddr});case 2:t=e.sent,e.t0=t,e.next="0"===e.t0?6:"1"===e.t0?8:"2"===e.t0?10:"3"===e.t0?12:14;break;case 6:return r.setState({UserRole:"Guest"}),e.abrupt("break",15);case 8:return r.setState({UserRole:"Player"}),e.abrupt("break",15);case 10:return r.setState({UserRole:"Developer"}),e.abrupt("break",15);case 12:return r.setState({UserRole:"Admin"}),e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:case"end":return e.stop()}}),e)}))),r.UpdateName=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.state.ConnectedContract.methods.GetMyDisplayName().call({from:r.state.ConnectedWalletAddr});case 2:if(null!==(t=e.sent)&&""!==t){e.next=6;break}return r.setState({UserDisplayName:null}),e.abrupt("return");case 6:r.setState({UserDisplayName:t});case 7:case"end":return e.stop()}}),e)}))),r.SubmitNewName=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.UserNameInput.current.value){e.next=3;break}return alert("Please enter username"),e.abrupt("return");case 3:return r.SetWaiting(),e.next=6,r.state.ConnectedContract.methods.SetMyDisplayName(r.UserNameInput.current.value).send({from:r.state.ConnectedWalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.SetIdle();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return t=e.sent,console.log(t),r.SetIdle(),e.next=11,r.UpdateName();case 11:r.SetChangingNameOff(),alert("You have set your name to "+r.state.UserDisplayName);case 13:case"end":return e.stop()}}),e)}))),r.RegisterAsPlayer=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r.state.ConnectedContract){e.next=2;break}return e.abrupt("return");case 2:return r.SetWaiting(),e.next=5,r.state.ConnectedContract.methods.SetMeToPlayer().send({from:r.state.ConnectedWalletAddr}).on("error",function(){var e=Object(o.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Error: Transaction Failed"),r.SetIdle();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:t=e.sent,console.log(t),r.SetIdle(),r.UpdateRole(),alert("You have registered as a player");case 10:case"end":return e.stop()}}),e)}))),r.RegisterAsDeveloper=Object(o.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.SetWaiting(),e.next=3,r.state.ConnectedContract.methods.SetMeToDeveloper().send({from:r.state.ConnectedWalletAddr}).on("error",(function(e){alert("Error: Transaction Failed"),r.SetIdle()}));case 3:t=e.sent,console.log(t),r.SetIdle(),r.UpdateRole(),alert("You have registered as a developer");case 8:case"end":return e.stop()}}),e)}))),r.RenderHome=function(){if(!r.state.ConnectedWalletAddr)return Object(L.jsxs)("div",{id:"modulebox",style:{height:"100vh"},children:[Object(L.jsx)(b.a,{animation:"border",role:"status"}),Object(L.jsx)("h1",{children:"Loading..."}),Object(L.jsx)("p",{children:"please login to your Metamask wallet and click the wallet button above if nothing happens"})]});switch(r.state.ActivePage){case"store":return Object(L.jsx)(D,{IsConnected:r.IsWalletConnected,WalletAddr:r.state.ConnectedWalletAddr,ConnectedContract:r.state.ConnectedContract,RenderCards:r.RenderCards,ShowPopup:r.SetWaiting,HidePopup:r.SetIdle});case"library":return Object(L.jsx)(E,{IsConnected:r.IsWalletConnected,WalletAddr:r.state.ConnectedWalletAddr,ConnectedContract:r.state.ConnectedContract,UserRole:r.state.UserRole,RenderCards:r.RenderCards,ShowPopup:r.SetWaiting,HidePopup:r.SetIdle});case"p2p":return Object(L.jsx)(z,{IsConnected:r.IsWalletConnected,WalletAddr:r.state.ConnectedWalletAddr,ConnectedContract:r.state.ConnectedContract,RenderCards:r.RenderCards,ShowPopup:r.SetWaiting,UserRole:r.state.UserRole,HidePopup:r.SetIdle});default:return Object(L.jsx)("h2",{children:"ERROR"})}},r.IsWalletConnected=function(){return null!=r.state.ConnectedWalletAddr},r.GotoLibrary=function(){r.setState({ActivePage:"library"})},r.GotoStore=function(){r.setState({ActivePage:"store"})},r.GotoP2P=function(){r.setState({ActivePage:"p2p"})},r.ScrollToTop=function(e){window.scrollTo(0,0)},r.SetWaiting=function(){console.log("Show waiting modal"),r.setState({isWaitingForBlockchain:!0})},r.SetIdle=function(){console.log("Hide waiting modal"),r.setState({isWaitingForBlockchain:!1})},r.SetChangingName=function(){null!==r.state.ConnectedWalletAddr&&""!==r.state.ConnectedWalletAddr?r.setState({isChangingName:!0}):alert("Please connect wallet first")},r.SetChangingNameOff=function(){r.setState({isChangingName:!1})},r.RenderUserInfoCard=function(){return Object(L.jsxs)("div",{id:"playercard",children:[Object(L.jsx)("div",{style:{margin:"auto",marginTop:"20px",marginBottom:"20px"},children:Object(L.jsx)(S.a,{diameter:100,seed:r.state.ConnectedWalletAddr?Object(A.jsNumberForAddress)(r.state.ConnectedWalletAddr):null})}),Object(L.jsx)(y.a,{placement:"top",overlay:Object(L.jsxs)(h.a,{id:"tooltip-top",children:["Click to ",Object(L.jsx)("strong",{children:"Reset Display Name"}),"."]}),children:Object(L.jsx)(j.a,{id:"purplebutton",style:{fontSize:"16px",marginBottom:"20px",borderRadius:"25px"},onClick:r.SetChangingName,children:null===r.state.UserDisplayName?"NoName":r.state.UserDisplayName})}),Object(L.jsxs)("div",{id:"playercard",style:{background:"rgba(33, 33, 33, 0.8)",display:r.state.isChangingName?"block":"none"},children:[Object(L.jsxs)("div",{style:{margin:"auto"},children:[Object(L.jsx)("h4",{children:"Enter New Name"}),Object(L.jsx)("p",{children:"Maximum 16 characters"})]}),Object(L.jsxs)(x.a,{className:"mb-3",style:{marginTop:"20px",marginBottom:"20px"},children:[Object(L.jsx)(f.a,{ref:r.UserNameInput,autoFocus:!0,maxLength:"16",placeholder:"New Username"}),Object(L.jsx)(j.a,{variant:"success",onClick:r.SubmitNewName,children:"Submit"}),Object(L.jsx)(j.a,{variant:"secondary",onClick:r.SetChangingNameOff,children:"Cancel"})]})]}),Object(L.jsx)("hr",{}),Object(L.jsx)(y.a,{placement:"top",overlay:Object(L.jsxs)(h.a,{id:"tooltip-top",children:["Click to ",Object(L.jsx)("strong",{children:"Reconnect Wallet"}),"."]}),children:Object(L.jsx)(j.a,{id:"purplebutton",style:{fontSize:"16px",marginBottom:"40px",borderRadius:"25px"},onClick:r.Init,children:Object(L.jsxs)("strong",{children:["Connected Wallet: ",r.state.ConnectedWalletAddr]})})}),Object(L.jsxs)("div",{id:"playerbadge",children:["Role: ",null===r.state.UserRole?"Loading...":r.state.UserRole]}),"Guest"===r.state.UserRole?Object(L.jsx)(j.a,{style:{marginBottom:"40px",backgroundColor:"#8D12C1",border:"2px solid black"},onClick:r.RegisterAsPlayer,variant:"success",children:"Register as Player"}):null,"Player"===r.state.UserRole?Object(L.jsx)(j.a,{style:{marginBottom:"40px",backgroundColor:"#8D12C1",border:"2px solid black"},onClick:r.RegisterAsDeveloper,variant:"success",children:"Register as Developer"}):null]})},r.state={TargetContractAddr:"0x6BD17918C8D0A756c3631Ec18E1B338BdD83c944",ConnectedWalletAddr:null,ConnectedContract:null,UserRole:null,TargetContract:null,ActivePage:"library",UserDisplayName:null,isWaitingForBlockchain:!1,isChangingName:!1},r.UserNameInput=a.a.createRef(),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(L.jsxs)("div",{style:{display:"block",backgroundImage:"url(".concat(_,")"),height:"auto",color:"#fff",backgroundSize:"100%"},children:[Object(L.jsx)(g.a,{bg:"dark",variant:"dark",children:Object(L.jsx)(O.a,{children:Object(L.jsx)("img",{src:J,alt:"",height:"50",style:{margin:"auto"}})})}),this.RenderUserInfoCard(),Object(L.jsx)("div",{id:"playercard",children:Object(L.jsxs)(v.a,{size:"lg",className:"mb-2",children:[Object(L.jsx)(j.a,{id:"purplebutton",onClick:this.GotoLibrary,children:"My Library"}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:this.GotoStore,children:"Store Page"}),Object(L.jsx)(j.a,{id:"purplebutton",onClick:this.GotoP2P,children:"P2P Marketplace"})]})}),Object(L.jsx)(j.a,{id:"purplebutton",style:{position:"fixed",bottom:"40px",right:"40px",borderRadius:"50px",fontSize:"25px",zIndex:"1"},onClick:this.ScrollToTop,children:"\ud83d\udd1d"}),null==this.state.UserRole?null:this.RenderHome(),Object(L.jsxs)(T.a,{show:this.state.isWaitingForBlockchain,backdrop:"static",keyboard:!1,size:"sm",centered:!0,style:{background:"rgba(33, 33, 33, 0.8)"},children:[Object(L.jsx)("p",{style:{marginTop:"40px",marginBottom:"20px",margin:"auto",padding:"20px"},children:Object(L.jsx)(b.a,{animation:"border",variant:"success"})}),Object(L.jsx)("p",{style:{marginTop:"20px",marginBottom:"20px",margin:"auto",padding:"20px"},children:"Waiting for Blockchain..."})]})]})}}]),n}(r.Component);var Y=function(){return Object(L.jsx)("div",{className:"App",children:Object(L.jsx)(V,{})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,819)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};s.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(Y,{})}),document.getElementById("root")),Q()}},[[797,1,2]]]);
//# sourceMappingURL=main.4ca09a4b.chunk.js.map